import{a8 as D,u as I,D as c,G as L,bC as T,Z as g,cr as m}from"./index-82335fd1.js";import{u as z}from"./site-06b62e59.js";const A={add:"添加",update:"编辑"},E={cate:"分类",group:"分组",site:"网页"},k=D("modal",()=>{const n=c(!1),o=c("add"),s=c("site"),C=L(()=>A[o.value]+E[s.value]),f=I(),e=z(),t=T({name:"",url:"",favicon:"",bgColor:""});function v(a,i,r=-1,l=-1){o.value=a,s.value=i,r!==-1&&e.setGroupIndex(r),l!==-1&&e.setSiteIndex(l),n.value=!0,a==="update"&&Object.assign(t,{site:()=>m(t,e.data[e.cateIndex].groupList[r].siteList[l]),group:()=>m(t,e.data[e.cateIndex].groupList[r]),cate:()=>m(t,e.data[e.cateIndex])}[i]())}let u=0;const S={add:{site:()=>e.addSite({id:u,...t}),group:()=>e.addGroup({id:u,name:t.name,siteList:[]}),cate:()=>e.addCate({id:u,name:t.name,groupList:[]})},update:{site:()=>e.updateSite({...t}),group:()=>e.updateGroup({name:t.name}),cate:()=>e.updateCate({name:t.name})}},w={site:()=>e.deleteSite(),group:()=>e.deleteGroup(),cate:()=>e.deleteCate()};function b(){n.value=!1}let d=!1;function h(){d||p()&&(d=!0,g(()=>{u=Date.now(),S[o.value][s.value](),n.value=!1,setTimeout(()=>d=!1,1e3)}))}function G(){p()&&g(()=>{w[s.value](),n.value=!1,s.value==="cate"&&e.cateIndex>0&&e.setCateIndex(e.cateIndex-1)})}function p(){const a=e.customData.length===0,i=f.settings.websitePreference==="Customize";return!a&&!i?(window.$message.warning("请先将网站偏好设置为“自定义”"),!1):(i||f.setSettings({websitePreference:"Customize"}),!0)}function x(){let a;for(a in t)t[a]=""}return{modalVisible:n,action:o,target:s,title:C,inputValues:t,showModal:v,handleCancel:b,handleCommit:h,handleDelete:G,clearInput:x}});export{k as u};
