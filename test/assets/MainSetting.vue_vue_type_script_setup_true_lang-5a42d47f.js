import{d as T,u as j,f as o,o as L,c as U,a as u,e as l,cs as c,ct as g,cu as w,cv as v,cw as b,cx as y,cy as S,cz as V,w as m,a5 as p,g as $,j as f,i as D}from"./index-82335fd1.js";import{_ as d}from"./SettingSelection.vue_vue_type_script_setup_true_lang-0e559f8a.js";import{u as E}from"./site-06b62e59.js";const P={key:0,px:"md:32 lg:64"},B={flex:"","flex-wrap":"",md:"grid grid-cols-2",lg:"grid grid-cols-3","justify-between":"","gap-12":""},F={"mt-24":"",flex:"",sm:"justify-center","justify-between":"","gap-x-12":""},O={"my-24":"","flex-center":""},M=T({__name:"MainSetting",setup(R){const n=j();function h(s){const a=c.children.find(e=>e.enName===s.enName).value.bgC;return f("div",{class:"flex items-center gap-x-8"},[f("div",{class:"w-16 h-16 circle border-1 border-fff",style:{backgroundColor:a}}),f("div",s.name)])}const r=E();function x(){const s={data:r.data,settings:n.settings},t=JSON.stringify(s),a=new Blob([t],{type:"application/json"}),e=URL.createObjectURL(a),i=document.createElement("a");i.download=`MoonStart_Data_${new Date().toLocaleString()}.json`,i.href=e,document.body.appendChild(i),i.click(),URL.revokeObjectURL(e),window.$message.success("已导出~")}function N(){const s=document.createElement("input");s.type="file",s.accept=".json",s.addEventListener("change",async()=>{var a;const t=(a=s.files)==null?void 0:a[0];if(t)try{const e=await t.text(),i=JSON.parse(e);if(!i.data||!i.settings)throw new Error("请导入合法的数据文件");k(i),n.setSettings({websitePreference:"Customize"}),window.$message.success("导入成功~")}catch(e){window.$message.error(e.message)}}),s.click()}function C(){window.$dialog.warning({title:"提示",content:"数据重置后无法恢复，确认要重置数据吗？",positiveText:"确认",negativeText:"取消",onPositiveClick(){r.restoreData(),n.restoreSettings(),g(n.settings.theme),window.$message.success("已重置~"),r.setCateIndex(0)}})}function k(s){r.setData(s.data),n.setSettings(s.settings),g(s.settings.theme)}return(s,t)=>{const a=D;return o(n).isSetting?(L(),U("section",P,[t[12]||(t[12]=u("div",{"my-16":"",text:"16 $text-c-1",italic:""}," 设置 ",-1)),u("div",B,[l(d,{modelValue:o(n).settings.theme,"onUpdate:modelValue":t[0]||(t[0]=e=>o(n).settings.theme=e),title:c.name,options:c.children,"render-label":h,"label-field":"name","value-field":"enName","on-update-value":e=>("toggleTheme"in s?s.toggleTheme:o(g))(e)},null,8,["modelValue","title","options","on-update-value"]),l(d,{modelValue:o(n).settings.search,"onUpdate:modelValue":t[1]||(t[1]=e=>o(n).settings.search=e),title:w.name,options:w.children,"label-field":"name","value-field":"enName","on-update-value":e=>o(n).setSettings({search:e})},null,8,["modelValue","title","options","on-update-value"]),l(d,{modelValue:o(n).settings.websitePreference,"onUpdate:modelValue":t[2]||(t[2]=e=>o(n).settings.websitePreference=e),title:v.name,options:v.children,"label-field":"name","value-field":"enName","on-update-value":e=>o(n).setSettings({websitePreference:e})},null,8,["modelValue","title","options","on-update-value"]),l(d,{modelValue:o(n).settings.iconStyle,"onUpdate:modelValue":t[3]||(t[3]=e=>o(n).settings.iconStyle=e),title:b.name,options:b.children,"label-field":"name","value-field":"enName","on-update-value":e=>o(n).setSettings({iconStyle:e})},null,8,["modelValue","title","options","on-update-value"]),l(d,{modelValue:o(n).settings.showTime,"onUpdate:modelValue":t[4]||(t[4]=e=>o(n).settings.showTime=e),title:y.name,options:y.children,"label-field":"name","value-field":"enName","on-update-value":e=>o(n).setSettings({showTime:e})},null,8,["modelValue","title","options","on-update-value"]),l(d,{modelValue:o(n).settings.showLunar,"onUpdate:modelValue":t[5]||(t[5]=e=>o(n).settings.showLunar=e),title:S.name,options:S.children,"label-field":"name","value-field":"enName","on-update-value":e=>o(n).setSettings({showLunar:e})},null,8,["modelValue","title","options","on-update-value"]),l(d,{modelValue:o(n).settings.showFooter,"onUpdate:modelValue":t[6]||(t[6]=e=>o(n).settings.showFooter=e),title:V.name,options:V.children,"label-field":"name","value-field":"enName","on-update-value":e=>o(n).setSettings({showFooter:e})},null,8,["modelValue","title","options","on-update-value"])]),u("div",F,[l(a,{type:"primary",secondary:"",onClick:C},{default:m(()=>[...t[8]||(t[8]=[p(" 重置数据 ",-1)])]),_:1}),l(a,{type:"success",secondary:"",onClick:N},{default:m(()=>[...t[9]||(t[9]=[p(" 导入数据 ",-1)])]),_:1}),l(a,{type:"primary",onClick:x},{default:m(()=>[...t[10]||(t[10]=[p(" 导出数据 ",-1)])]),_:1})]),u("div",O,[l(a,{size:"large",type:"primary",onClick:t[7]||(t[7]=e=>s.$router.back())},{default:m(()=>[...t[11]||(t[11]=[p(" 完成 ",-1)])]),_:1})])])):$("",!0)}}});export{M as _};
